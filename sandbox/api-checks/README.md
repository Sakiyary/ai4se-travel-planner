# API 可用性测试脚本

该临时目录包含若干独立脚本，用于快速验证外部服务（Supabase、通义千问、高德、科大讯飞语音识别）的连通性。脚本均基于 Node.js 18+，不会被纳入正式项目构建流程，可随时删除或扩展。

## 准备工作

1. 复制 `.env.example` 为 `.env`，填入各自申请到的密钥、URL 以及测试音频路径。
2. 准备一段 16kHz 采样率、16bit 单声道 PCM（`.pcm` 或 `.wav` 需转 PCM）音频，作为科大讯飞 ASR 测试输入。
3. 在本目录执行依赖安装：

   ```pwsh
   pnpm install
   ```

## 可用命令

- `pnpm supabase`：调用 Supabase REST API，检查匿名密钥对目标数据表是否可访问。
- `pnpm dashscope`：向通义千问（Qwen-Plus）发送一个示例提示词，并打印响应片段。
- `pnpm amap`：调用高德地点搜索接口，确认 Web Key 有效。
- `pnpm iflytek`：通过 WebSocket 向科大讯飞语音听写服务上传音频片段，输出识别结果。

> **注意**：脚本仅用于连通性验证，不包含完整的异常恢复与重试逻辑。请勿将正式业务密钥提交至版本库。

## 脚本输出说明

| 脚本 | 成功标志 | 常见失败原因 |
| --- | --- | --- |
| `supabase-check.mjs` | 控制台打印数据行数或“API 正常”。 | 表名错误、权限不足、网络异常。 |
| `dashscope-check.mjs` | 打印模型返回的旅行建议示例。 | 模型未开通、密钥过期、请求频率受限。 |
| `amap-check.mjs` | 返回 POI 列表，包含地点名称与地址。 | Key 未绑定公网域名、额度耗尽。 |
| `iflytek-asr-check.mjs` | 在数秒内输出最终转写文本。 | 录音格式不符、鉴权参数错误、网络受限。 |

如需扩展其他服务的连通性测试，可在此目录内新增脚本与说明文档。
